{
  "name": "carChartView",
  "type": "chart",
  "title":"车辆统计信息",
  "searchview":"carSearchView",
  "fields":[
    {
      "name":"departmentId",
      "label":"安装队",
      "type":"select",
      "option":{
        "provider":"defaultOptionProvider",
        "parameter":{
          "key":"_id",
          "value":"name",
          "query":{
            "_data":"tbl_department"
          }
        }
      }
    },
    {
      "name":"carId",
      "label":"车牌号",
      "type":"select",
      "option":{
        "provider":"defaultOptionProvider",
        "parameter":{
          "key":"_id",
          "value":"carNo",
          "query":{
            "_data":"tbl_car"
          },
          "depends":[
            {
              "depend":"departmentId",
              "name":"departmentId"
            }
          ]
        }
      }
    }
  ],
  "charts": [
    {
      "name": "carTopup",
      "label": "车辆本年度充值情况",
      "container":{
        "span":6
      },
      "datasource": {
        "provider": "carTopupChartDatasourceProvider",
        "parameter": {
          "legendGroup": "carNo",
          "seriesGroup": "yearmonth",
          "valueField": "amount"
        }
      },
      "option": {
        "title": {
          "text": "车辆本年度充值情况",
          "subtext": "和谐水务",
          "x": "center"
        },
        "tooltip": {
          "trigger": "axis",
          "axisPointer": {
            "type": "shadow"
          }
        },
        "legend": {
          "orient": "vertical",
          "left": "right"
        },
        "grid": {
          "left": "3%",
          "right": "4%",
          "bottom": "3%",
          "containLabel": true
        },
        "xAxis": {
          "type": "category"
        },
        "yAxis": {
          "type": "value",
          "boundaryGap": [
            0,
            0.01
          ]
        }
      }
    },
    {
      "name": "carTopup2",
      "label": "车辆本年度里程情况",
      "datasource": {
        "provider": "carMileageChartDatasourceProvider",
        "parameter": {
          "legendGroup": "carNo",
          "seriesGroup": "yearmonth",
          "valueField": "amount",
          "seriesType": "line"
        }
      },
      "option": {
        "title": {
          "text": "车辆本年度里程情况",
          "subtext": "和谐水务",
          "x": "center"
        },
        "tooltip": {
          "trigger": "axis",
          "axisPointer": {
            "type": "shadow"
          }
        },
        "legend": {
          "orient": "vertical",
          "left": "right"
        },
        "grid": {
          "left": "3%",
          "right": "4%",
          "bottom": "3%",
          "containLabel": true
        },
        "xAxis": {
          "type": "category"
        },
        "yAxis": {
          "type": "value",
          "boundaryGap": [
            0,
            0.01
          ]
        }
      }
    }
  ],
  "change":[
    {
      "name":"departmentId",
      "target":"carId"
    },
    {
      "name":"carId",
      "target":"$total"
    },
    {
      "name":"carId",
      "target":"$lastYearTotal"
    }
  ],
  "actions":[
    {
      "submit":true
    }

  ],
  "permission": []
}